ext {
	swagger_annotations_version = "2.0.0"
	jackson_version = "2.13.2"
	jersey_version = "2.36"
}

dependencies {
//	api 'org.springframework.boot:spring-boot-starter-json:+'

//	Need to include libraries for generated code to work
//	implementation "io.swagger.core.v3:swagger-annotations:$swagger_annotations_version"
//	implementation "org.glassfish.jersey.core:jersey-client:$jersey_version"
//	implementation "org.glassfish.jersey.media:jersey-media-multipart:$jersey_version"
//	implementation "org.glassfish.jersey.media:jersey-media-json-jackson:$jersey_version"
//	implementation "com.fasterxml.jackson.core:jackson-core:$jackson_version"
//	implementation "com.fasterxml.jackson.core:jackson-annotations:$jackson_version"
//	implementation "com.fasterxml.jackson.core:jackson-databind:$jackson_version"
//	implementation "com.brsanthu:migbase64:2.2"
//	implementation "org.glassfish.jersey.inject:jersey-hk2:$jersey_version"
//	implementation "org.glassfish.jersey.connectors:jersey-jdk-connector:$jersey_version"
}

openApiGenerate {
	inputSpec = "$rootDir//service/src/main/resources/static/swagger/openapi-docs.yaml".toString()
	generatorName = 'java'
	library = 'jersey2'
	invokerPackage = '${artifactGroup}.client'
	modelPackage = '${artifactGroup}.model'
	apiPackage = '${artifactGroup}.api'
	ignoreFileOverride = '${projectDir}/.swagger-codegen-ignore'
	// we may want to generate tests or doc later ...
	generateModelTests = false
	generateModelDocumentation = false
	generateApiTests = false
	generateApiDocumentation = false
}

idea.module.generatedSourceDirs = [file("${openApiGenerate.outputDir}/src/main/java")]
sourceSets.main.java.srcDir "${openApiGenerate.outputDir}/src/main/java"
compileJava.dependsOn tasks.getByName('openApiGenerate')
sourcesJar.dependsOn tasks.getByName('openApiGenerate')
