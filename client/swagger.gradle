ext {
//	swagger_annotations_version = "2.2.2"
	jackson_version = "2.14.2"
	jersey_version = "2.36"
}

dependencies {
//	api 'org.springframework.boot:spring-boot-starter-json:+'

	//Need to include libraries for generated code to work
	implementation "com.google.code.findbugs:jsr305:3.0.2" // TODO: is there a less-abandoned jar to use?

	implementation 'com.google.code.gson:gson:2.10.1'
	implementation 'io.gsonfire:gson-fire:1.9.0-alpha2'

	implementation 'com.squareup.okhttp3:okhttp:4.9.3'
	implementation 'com.squareup.okhttp3:logging-interceptor:4.9.3'

//	implementation 'io.swagger.core.v3:swagger-annotations:2.2.9'
	implementation 'io.swagger:swagger-annotations:1.6.10'

	implementation "com.fasterxml.jackson.datatype:jackson-datatype-jsr310:$jackson_version"

//	implementation "io.swagger.core.v3:swagger-annotations:$swagger_annotations_version"
	implementation "org.glassfish.jersey.core:jersey-client:$jersey_version"
	implementation "org.glassfish.jersey.media:jersey-media-multipart:$jersey_version"
	implementation "org.glassfish.jersey.media:jersey-media-json-jackson:$jersey_version"
//	implementation "com.fasterxml.jackson.core:jackson-core:$jackson_version"
//	implementation "com.fasterxml.jackson.core:jackson-annotations:$jackson_version"
//	implementation "com.fasterxml.jackson.core:jackson-databind:$jackson_version"
//	implementation "com.brsanthu:migbase64:2.2"
//	implementation "org.glassfish.jersey.inject:jersey-hk2:$jersey_version"
//	implementation "org.glassfish.jersey.connectors:jersey-jdk-connector:$jersey_version"
}


openApiGenerate {
	inputSpec = "$rootDir//service/src/main/resources/static/swagger/openapi-docs.yaml".toString()
	outputDir = "$buildDir/generated".toString()
	generatorName = 'java'
	library = 'okhttp-gson'
	configOptions = [
			dateLibrary: "java8" // this is the default; delete?
	]
	invokerPackage = "${artifactGroup}.client".toString()
	modelPackage = "${artifactGroup}.model".toString()
	apiPackage = "${artifactGroup}.api".toString()
//	ignoreFileOverride = '${projectDir}/.swagger-codegen-ignore'
	// we may want to generate tests or doc later ...
	generateModelTests = false
	generateModelDocumentation = false
	generateApiTests = false
	generateApiDocumentation = false
}

idea.module.generatedSourceDirs = [file("${openApiGenerate.outputDir.get()}/src/main")]
sourceSets.main.java.srcDir files("${openApiGenerate.outputDir.get()}/src/main")
compileJava.dependsOn tasks.getByName('openApiGenerate')
sourcesJar.dependsOn tasks.getByName('openApiGenerate')

// next line required by swagger client generation
//generateSwaggerCode.dependsOn generatePomFileForWorkspacedataserviceResttemplateClientLibraryPublication
